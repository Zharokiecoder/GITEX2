<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MTN GITEX Nigeria - Registration</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="mtn-logo">
                <img src="asset/mtn-logo.png" alt="MTN">
            </div>
            <div class="event-title">GITEX Nigeria</div>
        </div>

        <!-- Registration Form -->
        <div class="card">
            <h2>Biodata</h2>
            <form id="regForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>First Name <span class="required">*</span></label>
                        <input type="text" class="form-control" name="firstName" placeholder="e.g., John" required>
                    </div>
                    <div class="form-group">
                        <label>Last Name <span class="required">*</span></label>
                        <input type="text" class="form-control" name="lastName" placeholder="e.g., Okon" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Gender <span class="required">*</span></label>
                        <div class="gender-options">
                            <button type="button" class="option-btn" data-value="Male">Male</button>
                            <button type="button" class="option-btn" data-value="Female">Female</button>
                        </div>
                        <input type="hidden" name="gender" required>
                    </div>
                    <div class="form-group">
                        <label>Phone Number <span class="required">*</span></label>
                        <input type="tel" class="form-control" name="phone" placeholder="e.g., 091 456 543 32" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Email <span class="required">*</span></label>
                        <input type="email" class="form-control" name="email" placeholder="e.g., John@gmail.com"
                            required>
                    </div>
                    <div class="form-group">
                        <label>Location <span class="required">*</span></label>
                        <input type="text" class="form-control" name="location" placeholder="e.g., F.C.T., Abuja"
                            required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Registration Channel <span class="required">*</span></label>
                    <div class="channel-options">
                        <button type="button" class="option-btn active" data-value="Walk-in">Walk-in</button>
                        <button type="button" class="option-btn" data-value="Invited">Invited</button>
                        <button type="button" class="option-btn" data-value="VIP">VIP</button>
                        <button type="button" class="option-btn" data-value="Staff">Staff</button>
                    </div>
                    <input type="hidden" name="channel" value="Walk-in" required>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="consent" name="consent" required>
                    <label for="consent">I consent to MTN contacting me about products & services.</label>
                </div>

                <div class="btn-nav">
                    <button type="button" class="btn btn-primary" onclick="validateAndProceed()">Next ></button>
                </div>
            </form>
        </div>
    </div>

    <!-- Keep all existing UI scripts -->
    <script>
        // Keep these - they handle UI interactions
        document.querySelectorAll('.option-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                const group = this.parentElement;
                const hiddenInput = group.parentElement.querySelector('input[type="hidden"]');

                group.querySelectorAll('.option-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                if (hiddenInput) {
                    hiddenInput.value = this.dataset.value;
                }
            });
        });

        // Modified to work with api.js
        function validateAndProceed() {
            const form = document.getElementById('regForm');
            if (!form.checkValidity()) {
                form.reportValidity();
                return;
            }

            const formData = new FormData(form);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            const genderBtn = document.querySelector('.gender-options .option-btn.active');
            const channelBtn = document.querySelector('.channel-options .option-btn.active');

            if (genderBtn) {
                data.gender = genderBtn.dataset.value;
            } else {
                alert('Please select your gender');
                return;
            }

            if (channelBtn) data.channel = channelBtn.dataset.value;

            // Store consent checkbox value
            data.consent = document.getElementById('consent').checked;

            // Save to localStorage and proceed
            localStorage.setItem('registrationData', JSON.stringify(data));
            window.location.href = 'interests.html';

        }
    </script>
    <script src="api.js"></script>
</body>

</html>